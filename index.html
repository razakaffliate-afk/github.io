<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ballot Unit</title>
<link rel="stylesheet" href="style.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
body {
    margin: 20px;
    font-family: Arial, sans-serif;
    background: #f5f5f5;
}

/* ---------- TABS ---------- */
.top-tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    flex-wrap: wrap;
}

.tab {
    padding: 10px 20px;
    border: none;
    border-radius: 20px;
    background: #aaa;
    color: white;
    font-weight: bold;
    cursor: pointer;
    font-size: 16px;
}

.tab.pink { background: #ffb9d9; color: #333; }
.tab.blue { background: #cdd8e5; color: #333; }
.tab.active { background: #777; }

/* ---------- BALLOT BOX ---------- */
.ballot-box {
    width: 95%;
    max-width: 680px;
    margin: auto;
    background: white;
    border-radius: 15px;
    padding: 10px;
    box-shadow: 0 0 10px #ccc;
}

.header {
    display: flex;
    justify-content: space-between;
    padding: 10px 5px;
    font-size: 18px;
    font-weight: bold;
}

.ready .dot {
    width: 10px;
    height: 10px;
    display: inline-block;
    background: green;
    border-radius: 50%;
    margin-left: 5px;
}

.ballot-table {
    width: 100%;
    border: 1px solid #ddd;
    margin-top: 10px;
    position: relative;
}

/* Draw the FIRST continuous line after serial number */
.ballot-table::before {
    content: "";
    position: absolute;
    left: 50px;              
    top: 0;
    width: 2px;
    height: 100%;
    background: #cfcfcf;
}

/* Draw the SECOND continuous line before buttons */
.ballot-table::after {
    content: "";
    position: absolute;
    right: 120px;           
    top: 0;
    width: 2px;
    height: 100%;
    background: #cfcfcf;
}

.row {
    display: grid;
    grid-template-columns: 50px 1fr 60px 60px;
    align-items: center;
    border-bottom: 1px solid #e0e0e0;
    padding: 10px;
    font-size: 16px;
}

.row:nth-child(odd) {
    background: #fafafa;
}

.col.number {
    text-align: center;
    font-size: 18px;
    font-weight: bold;
}

.col.name {
    font-size: 16px;
    padding-left: 5px;
}

.col.light .red-dot {
    width: 18px;
    height: 18px;
    background: #8c0000;
    border-radius: 50%;
    display: inline-block;
}

.col.btn button {
    width: 50px;
    height: 30px;
    background: #083c75;
    border: none;
    border-radius: 10px;
    transition: 0.2s ease;
    cursor: pointer;
}

.col.btn button:hover {
    background: #0a5cb5;
    box-shadow: 0 0 8px #0a5cb5;
    transform: scale(1.05);
}

.ready-indicator {
    width: 16px;          
    height: 16px;         
    background: #00cc2d;  
    border-radius: 50%;
    display: inline-block;
    box-shadow: 0 0 6px #00ff55; 
    margin-left: 8px;
}

/* ---------- RESPONSIVE ---------- */
@media (max-width: 480px) {
    body {
        margin: 10px;
    }

    .tab {
        padding: 8px 12px;
        font-size: 14px;
    }

    .ballot-box {
        width: 100%;
        padding: 8px;
    }

    .header {
        flex-direction: row;
        font-size: 16px;
        gap: 5px;
    }

    .row {
        grid-template-columns: 40px 1fr 50px 50px;
        font-size: 14px;
        padding: 8px;
    }

    .col.name {
        font-size: 14px;
    }

    .col.btn button {
        width: 45px;
        height: 28px;
    }

    .ballot-table::before {
        left: 40px;
    }

    .ballot-table::after {
        right: 110px;
    }

    .col.name img {
        width: 50px !important;
        height: 50px !important;
    }
}
</style>

</head>
<body>

<div class="top-tabs">
    <button class="tab active" data-target="#ballot-ward">Ward</button>
<button class="tab pink" data-target="#ballot-block">Block</button>
<button class="tab blue" data-target="#ballot-district">District</button>
  
</div>

<div class="ballot-box tab-content" id="ballot-ward">
    <div class="header">
        <span class="ready">Ready <span class="ready-indicator"></span></span>
        <span class="unit">Ballot Unit 1</span>
    </div>

    <div class="ballot-table">

        <!-- Row -->
        <div class="row">
            <div class="col number">1</div>
            <div class="col name"></div>
            <div class="col light"><span class="red-dot"></span></div>
            <div class="col btn"><button disabled></button></div>
        </div>

        <div class="row">
            <div class="col number">2</div>
            <div class="col name" style="display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;"><strong>ഫൗസിയ കെ.വി </strong><span><img style="width:70px;height:70px;" src="hand (2).png" alt="symbol"></span></div>
     
            <div class="col light"><span class="red-dot"></span></div>
            <div class="col btn"><button></button></div>
        </div>

        <!-- Empty rows -->
        <!-- Repeat until 10 -->
        <div class="row"><div class="col number">3</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">4</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">5</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">6</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">7</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">8</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">9</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row"><div class="col number">10</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>

    </div>
</div>
<div class="ballot-box tab-content" id="ballot-block"  style="display:none;">
    <div class="header">
        <span class="ready">Ready <span class="ready-indicator"></span></span>
        <span class="unit">Ballot Unit 1</span>
    </div>

    <div class="ballot-table" >

        <!-- Row -->
        <div class="row" style="background: #ffb9d9;">
            <div class="col number">1</div>
            <div class="col name"></div>
            <div class="col light"><span class="red-dot"></span></div>
            <div class="col btn"><button disabled></button></div>
        </div>
 <div class="row" style="background: #ffb9d9;"><div class="col number">2</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;">
            <div class="col number">3</div>
            <div class="col name" style="display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;"><strong>സജ്‌ന ഫിറോസ് </strong><span><img style="width:70px;height:70px;" src="hand_congress.png" alt="symbol"></span></div>
     
            <div class="col light"><span class="red-dot"></span></div>
            <div class="col btn"><button></button></div>
        </div>

        <!-- Empty rows -->
        <!-- Repeat until 10 -->
        <div class="row" style="background: #ffb9d9;"><div class="col number">4</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;"><div class="col number">5</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;"><div class="col number">6</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;"><div class="col number">7</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;"><div class="col number">8</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;"><div class="col number">9</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
        <div class="row" style="background: #ffb9d9;"><div class="col number">10</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
       
    </div>
</div>
<div class="ballot-box tab-content" id="ballot-district" style="display:none">
    <div class="header">
        <span class="ready">Ready <span class="ready-indicator"></span></span>
        <span class="unit">Ballot Unit 1</span>
    </div>

    <div class="ballot-table">

        <!-- Row -->
   <div class="row" style="background: #cdd8e5;"><div class="col number">3</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>

        <div class="row" style="background: #cdd8e5;">
            <div class="col number">2</div>
            <div class="col name" style="display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;"><strong>അഷ്‌ഹർ  പെരുമുക്ക് </strong><span><img style="width:70px;height:70px;" src="Indian_Election_Symbol_Lader.svg" alt="symbol"></span></div>
     
            <div class="col light"><span class="red-dot"></span></div>
            <div class="col btn"><button></button></div>
        </div>

        <!-- Empty rows -->
        <!-- Repeat until 10 -->
 <div class="row" style="background: #cdd8e5;"><div class="col number">3</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">4</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">5</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">6</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">7</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">8</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">9</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>
<div class="row" style="background: #cdd8e5;"><div class="col number">10</div><div class="col name"></div><div class="col light"><span class="red-dot"></span></div><div class="col btn"><button disabled></button></div></div>


    </div>
</div>

<!-- Beep Sound -->
<audio id="beepSound" src="https://files.catbox.moe/6k1m0p.mp3"></audio>




<script>
/* ---------- Web Audio beep (reliable) ---------- */
let audioCtx = null;

function ensureAudioContext() {
    if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
    if (audioCtx.state === 'suspended') {
        audioCtx.resume();
    }
    return audioCtx;
}

function playLongBeep(durationSeconds = 1.2, options = {}) {
    const ctx = ensureAudioContext();
    const type = options.type || 'square';

    const osc = ctx.createOscillator();
    const gain = ctx.createGain();

    osc.type = type;
    osc.frequency.setValueAtTime(750, ctx.currentTime);

    const now = ctx.currentTime;
    gain.gain.setValueAtTime(0.0001, now);
    gain.gain.linearRampToValueAtTime(0.22, now + 0.01);
    gain.gain.setValueAtTime(0.22, now + durationSeconds - 0.08);
    gain.gain.linearRampToValueAtTime(0.0001, now + durationSeconds);

    osc.connect(gain);
    gain.connect(ctx.destination);

    osc.start(now);
    osc.stop(now + durationSeconds + 0.02);

    osc.onended = function() {
        try { osc.disconnect(); gain.disconnect(); } catch(e) {}
    };
}

$(document).ready(function () {

    /* ------ TAB SWITCHING ------ */
    $(".tab").click(function () {
        $(".tab").removeClass("active");
        $(this).addClass("active");

        $(".tab-content").hide();
        let target = $(this).data("target");
        $(target).fadeIn(150);
    });

    /* ------ VOTE BUTTON CLICK ------ */
    $(".col.btn button").on("click", function () {
        ensureAudioContext();
        playLongBeep(1.2, { type: "square" });

        let row = $(this).closest(".row");
        let container = $(this).closest(".ballot-box");

        let redDot = row.find(".red-dot");
        let ready = container.find(".ready-indicator");

        redDot.css({
            "background": "#ff0000",
            "box-shadow": "0 0 18px rgba(255,0,0,0.9)",
            "transition": "0.3s"
        });

        ready.css({
            "background": "#ff0000",
            "box-shadow": "0 0 12px rgba(255,0,0,0.9)",
            "transition": "0.3s"
        });

        $(this).prop("disabled", true).css({
            opacity: 0.6, cursor: "not-allowed", transform: "scale(1)"
        });

        // Detect which box and redirect accordingly
        let page = "confirmation.html";   // default

        if (container.attr("id") === "ballot-block") {
            page = "confirmationblock.html";
        } else if (container.attr("id") === "ballot-district") {
            page = "confirmationdistrict.html";
        }

        setTimeout(function () {
            window.location.href = page;
        }, 1200);
    });
});

</script>


</body>
</html>
